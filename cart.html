<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>🛒 ตะกร้าสินค้าของฉัน</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container mt-5">
    <h1 class="mb-4">🛒 ตะกร้าสินค้าของฉัน</h1>

    {% if items %}
    <table class="table table-bordered align-middle">
        <thead class="table-light">
            <tr>
                <th>ชื่อสินค้า 📦</th>
                <th class="text-center">จำนวน 🔢</th>
                <th class="text-center">หน่วย 📏</th>
                <th class="text-center">จัดการ 🛠️</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in items %}
            <tr>
                <td>{{ entry.item.name }}</td>
                <td class="text-center">{{ entry.quantity }}</td>
                <td class="text-center">{{ entry.item.unit }}</td>
                <td class="text-center">
                    <a href="{% url 'remove_from_cart' entry.item.id %}" 
                       class="btn btn-outline-danger btn-sm"
                       onclick="return confirm('คุณแน่ใจที่จะลบ {{ entry.item.name }} ออกจากตะกร้าหรือไม่?');" 
                       title="ยกเลิกรายการ">
                       ❌ ยกเลิก
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form method="post" class="mt-4">
        {% csrf_token %}
        <div class="mb-3">
            <label for="user_name" class="form-label">👤 ชื่อผู้สั่งซื้อ</label>
            <input type="text" name="user_name" id="user_name" class="form-control" placeholder="กรอกชื่อของคุณ" required>
        </div>
        <div class="mb-3">
            <label for="timestamp" class="form-label">📅 วันที่และเวลา</label>
            <input type="datetime-local" name="timestamp" id="timestamp" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-success px-4">
            ✅ ยืนยันสั่งซื้อ
        </button>
        <a href="{% url 'inventory' %}" class="btn btn-secondary ms-2 px-4">
            🔙 กลับไปเลือกสินค้า
        </a>
    </form>

    {% else %}
    <div class="alert alert-warning text-center" role="alert">
        🛒 ไม่มีสินค้าในตะกร้าของคุณ
    </div>
    <div class="text-center">
        <a href="{% url 'inventory' %}" class="btn btn-primary px-4">
            🏠 กลับไปหน้าร้านค้า
        </a>
    </div>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
